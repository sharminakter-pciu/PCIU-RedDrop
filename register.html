<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Register | PCIU RedDrop</title>
    <style>
      /* ========== FULL BACKGROUND LOGO ========== */
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background: url("logo.jpeg") no-repeat center center fixed;
        background-size: 400px;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* ====== Overlay for better readability ====== */
      .overlay {
        background-color: rgba(255, 240, 240, 0.85);
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(179, 0, 27, 0.4);
        width: 400px;
      }

      h2 {
        color: #b3001b;
        text-align: center;
        margin-bottom: 24px;
        font-weight: 800;
        font-size: 26px;
        user-select: none;
      }

      input,
      select {
        width: 100%;
        padding: 12px 14px;
        margin-bottom: 16px;
        border-radius: 8px;
        border: 1.5px solid #b3001b;
        font-size: 16px;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: #ffcc00;
        box-shadow: 0 0 5px #ffcc00;
      }

      button {
        width: 100%;
        padding: 14px;
        background-color: #b3001b;
        color: white;
        font-weight: 700;
        border: none;
        border-radius: 20px;
        font-size: 18px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      button:hover {
        background-color: #8f0015;
      }

      .bottom-links {
        text-align: center;
        margin-top: 15px;
        font-size: 14px;
      }

      .bottom-links a {
        color: #b3001b;
        text-decoration: none;
        font-weight: 600;
      }

      .bottom-links a:hover {
        text-decoration: underline;
      }

      .success-popup {
        position: fixed;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #b3001b;
        color: #fff;
        padding: 18px 30px;
        border-radius: 10px;
        font-size: 18px;
        font-weight: bold;
        display: none;
        z-index: 999;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      }
    </style>
  </head>

  <body>
    <div class="overlay">
      <form id="registerForm">
        <h2>Be the Reason of Someone Smiles Today</h2>
        <input type="text" id="name" placeholder="Name" required />
        <input type="email" id="email" placeholder="Email" required />
        <input type="text" id="phone" placeholder="Phone" required />
        <select id="bloodGroup" required>
          <option value="">Select Blood Group</option>
          <option value="A+">A+</option>
          <option value="A-">A-</option>
          <option value="B+">B+</option>
          <option value="B-">B-</option>
          <option value="AB+">AB+</option>
          <option value="AB-">AB-</option>
          <option value="O+">O+</option>
          <option value="O-">O-</option>
        </select>
        <input type="text" id="area" placeholder="Area" required />
        <input type="password" id="password" placeholder="Password" required />
        <button type="submit">Register</button>

        <div class="bottom-links">
          Already registered? <a href="login.html">Login here</a><br />
          <a href="index.html">Back to Home</a>
        </div>
      </form>
    </div>

    <div id="successPopup" class="success-popup">Registration successful!</div>

    <script>
      document
        .getElementById("registerForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const name = document.getElementById("name").value.trim();
          const email = document.getElementById("email").value.trim();
          const phone = document.getElementById("phone").value.trim();
          const bloodGroup = document.getElementById("bloodGroup").value;
          const area = document.getElementById("area").value.trim();
          const password = document.getElementById("password").value;

          const allUsers = JSON.parse(localStorage.getItem("allUsers")) || [];

          const alreadyExists = allUsers.some((user) => user.email === email);
          if (alreadyExists) {
            alert("❌ This email is already registered. Please login.");
            window.location.href = "login.html";
            return;
          }

          const newUser = { name, email, phone, bloodGroup, area, password };
          allUsers.push(newUser);
          localStorage.setItem("allUsers", JSON.stringify(allUsers));
          localStorage.setItem("pcuiUser", JSON.stringify(newUser));
          localStorage.setItem("pcuiLoggedIn", "true");

          // Show popup
          const popup = document.getElementById("successPopup");
          popup.style.display = "block";
          setTimeout(() => {
            popup.style.display = "none";
            window.location.href = "dashboard.html";
          }, 2000);
        });
    </script>
  </body>
</html>
